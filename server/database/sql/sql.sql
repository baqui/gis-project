
SELECT ST_AsGeoJSON(cell) FROM (
SELECT (
  ST_Dump(
    makegrid_2d(
      ST_GeomFromText(
        'Polygon((14.040465652294529 54.12202348184371, 18.24822932416953 55.05144493105059, 24.02703791791953 54.58301858656643 , 24.27972346479453 50.329477603728535, 23.02728205854453 48.93491932736782, 18.89642268354453 49.208415884837294, 14.655700027294529 50.84563558240263, 13.886657058544529 52.86727749857611, 14.040465652294529 54.12202348184371))',
        4326
      ),
      300000, -- width step in meters
      300000  -- height step in meters
    )
  )
) .geom AS cell
)q;



SELECT cell FROM (
SELECT (
  ST_Dump(
    makegrid_2d(
      ST_GeomFromText(
        'Polygon((14.040465652294529 54.12202348184371, 18.24822932416953 55.05144493105059, 24.02703791791953 54.58301858656643 , 24.27972346479453 50.329477603728535, 23.02728205854453 48.93491932736782, 18.89642268354453 49.208415884837294, 14.655700027294529 50.84563558240263, 13.886657058544529 52.86727749857611, 14.040465652294529 54.12202348184371))',
        4326
      ),
      100000, -- width step in meters
      100000  -- height step in meters
    )
  )
) .geom AS cell
) AS q_grid;




INSERT INTO grids (location) SELECT (
  ST_Dump(
    makegrid_2d(
      ST_GeomFromText(
        'Polygon((14.040465652294529 54.12202348184371, 18.24822932416953 55.05144493105059, 24.02703791791953 54.58301858656643 , 24.27972346479453 50.329477603728535, 23.02728205854453 48.93491932736782, 18.89642268354453 49.208415884837294, 14.655700027294529 50.84563558240263, 13.886657058544529 52.86727749857611, 14.040465652294529 54.12202348184371))',
        4326
      ),
      50000, -- width step in meters
      50000  -- height step in meters
    )
  )
) .geom;

UPDATE grids SET zoom = 6 WHERE zoom IS NULL;
